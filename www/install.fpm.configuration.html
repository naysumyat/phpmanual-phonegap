<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Configura&ccedil;&atilde;o</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.fpm.install.html">Installation</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.pecl.html">Instala&ccedil;&atilde;o das extens&otilde;es PECL</a></div>
 <div class="up"><a href="install.fpm.html">FastCGI Process Manager (FPM)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="install.fpm.configuration" class="sect1">
   <h2 class="title">Configuração</h2>
   <p class="para">
    FPM usa a sintaxe do <var class="filename">php.ini</var> para arquivos de configuração - <var class="filename">php-fpm.conf</var>.
   </p>
   <div class="sect2"> 
    <h3 class="title">Lista de diretivas globais <var class="filename">php-fpm.conf</var></h3>
    <dl>

     
      <dt id="pid">
       <em><code class="parameter">pid</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para"> 
        Caminho para o arquivo PID. Valor padrão: nenhum.
       </p>
      </dd>

     
     
      <dt id="error-log">
       <em><code class="parameter">error_log</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Caminho para o arquivo de log de error. Valor padrão:
        <em>#INSTALL_PREFIX#/log/php-fpm.log</em>.
       </p> 
      </dd>

     
     
      <dt id="log-level">
       <em><code class="parameter">log_level</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Nível de log de erro. Valores possíveis: alert, error, warning, notice,
        debug. Valor padrão: aviso prévio.
       </p> 
      </dd>

     
     
      <dt id="emergency-restart-threshold">
       <em><code class="parameter">emergency_restart_threshold</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        Se esse número de processos filho sair com SIGSEGV ou SIGBUS dentro
        do intervalo de tempo definido pelo <em>emergency_restart_interval</em> 
        então FPM será reiniciado. Um valor de 0 significa &#039;Off&#039;. Valor padrão: 0 (desligado).
       </p> 
      </dd>

     
     
      <dt id="emergency-restart-interval">
       <em><code class="parameter">emergency_restart_interval</code></em>
       <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span>
      </dt>

      <dd>

       <p class="para">
        Intervalo de tempo utilizado por emergency_restart_interval para determinar quando
        um reinício será feito. Isto pode ser útil para contornar
        corrupções acidentais em memória compartilhada de um acelerador.
        Unidades disponíveis: s(econds), m(inutos), h(our), ou d(ays).
        Unidade Padrão: seconds. Valor padrão: 0 (desligado).
       </p> 
      </dd>

     
     
      <dt id="process-control-timeout">
       <em><code class="parameter">process_control_timeout</code></em>
       <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span>
      </dt>

      <dd>

       <p class="para">
       Prazo para processos filhos para esperar uma reação em sinais de
       mestre. Unidades disponíveis: s(econds), m(inutes), h(ours), or d(ays)
       Unidade Padrão: seconds. Valor padrão: 0.
       </p> 
      </dd>

     
     
      <dt id="daemonize">
       <em><code class="parameter">daemonize</code></em>
       <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
      </dt>

      <dd>

       <p class="para">
        Enviar FPM de fundo. Definido como &#039;no&#039;(não) para manter FPM em primeiro plano para
        depuração. Valor padrão: yes.
       </p> 
      </dd>

     
    </dl>

   </div>

   <div class="sect2"> 
    <h3 class="title">List of pool directives</h3>
    <p class="para">
     Com FPM você pode executar várias rotinas de processos com configuração diferente.
     Essas são as configurações que podem ser otimizadas por cada rotina. 
    </p>
    <dl>

     
      <dt id="listen">
       <em><code class="parameter">listen</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
       O endereço no qual a aceitar pedidos FastCGI. Sintaxes válidas são:
        &#039;ip.add.re.ss:port&#039;, &#039;port&#039;, &#039;/path/to/unix/socket&#039;. Esta opção é
         obrigatório, em cada rotina.
       </p> 
      </dd>

     
     
      <dt id="listen-backlog">
       <em><code class="parameter">listen.backlog</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        Definir listen(2) backlog. Um valor de &quot;-1&quot; significa ilimitado. Valor padrão:
        -1.
       </p> 
      </dd>

     
     
      <dt id="listen-allowed-clients">
       <em><code class="parameter">listen.allowed_clients</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
       Lista de endereços IPv4 de clientes FastCGI que estão autorizados a
       conectar. Equivalente à variável de ambiente FCGI_WEB_SERVER_ADDRS no
       originais PHP FastCGI (5.2.2 +). Só faz sentido com um soquete de escuta TCP.
       Cada endereço deve ser separado por uma vírgula. Se este valor for deixado em branco,
       conexões serão aceitas a partir de qualquer endereço IP. Valor padrão: nenhum.
       </p> 
      </dd>

     
     
      <dt id="listen-owner">
       <em><code class="parameter">listen.owner</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Definir permissões para socket unix, se este for usado. No Linux, permissões de
        leitura/gravação devem ser definidas de forma a permitir conexões a partir de um servidor
        web. Muitos sistemas derivados do BSD permitir conexões independentemente das permissões.
        Os valores padrão: usuários e grupos são definidos como o usuário que está executando, de modo está definido para 0666.
       </p> 
      </dd>

     
     
      <dt id="listen-group">
       <em><code class="parameter">listen.group</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Ver <em>listen.owner</em>.
       </p> 
      </dd>

     
     
      <dt id="listen-mode">
       <em><code class="parameter">listen.mode</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Ver <em>listen.owner</em>.
       </p> 
      </dd>

     
     
      <dt id="user">
       <em><code class="parameter">user</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Usuário Unix de processos FPM. Esta opção é obrigatória.
       </p> 
      </dd>

     
     
      <dt id="group">
       <em><code class="parameter">group</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Grupo Unix de processos FPM. Se não for definido, o grupo do usuário padrão é
        utilizado.
       </p> 
      </dd>

     
     
      <dt id="pm">
       <em><code class="parameter">pm</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Escolha como o gestor do processo vai controlar o número de processos
        filhos. Valores possíveis: <em>static</em>, <em>ondemand</em>,
        <em>dynamic</em>. 
        Esta opção é obrigatória.
       </p>
       <p class="para">
        <em>static</em> - o número de processos filho é fixado (<em>pm.max_children</em>).
       </p>
       <p class="para">
        <em>ondemand</em> - os processos sob demanda (quando solicitado,
        em oposição a dinâmica, então <em>pm.start_servers</em> são iniciadas
        quando o serviço é iniciado.
       </p>
       <p class="para">
        <em>dynamic</em> - o número de processos filho é definida dinamicamente com base nas
        seguintes diretrizes: <em>pm.max_children</em>, <em>pm.start_servers</em>, 
        <em>pm.min_spare_servers</em>, <em>pm.max_spare_servers</em>.
       </p>
      </dd>

     
     
      <dt id="pm.max-chidlren">
       <em><code class="parameter">pm.max_children</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        O número de processos filhos podem ser criados quando <em>pm</em> está configurado como
        <em>static</em> e o número máimo de processos filhos podem ser criados 
        quando <em>pm</em> está configurado como <em>dynamic</em>. Essa
        opção é obrigatória.
       </p>
       <p class="para">
        Esta opção define o limite para o número de solicitações simultâneas que
        será servida. Equivalente à directiva ApacheMaxClients com
        mpm_prefork e ao <var class="varname"><var class="varname">PHP_FCGI_CHILDREN</var></var> variável de ambiente no
        originais PHP FastCGI.
       </p>
      </dd>

     
     
      <dt id="pm.start-servers">
       <em><code class="parameter">pm.start_servers</code></em>
       <span class="type"><span class="type in">in</span></span>
      </dt>

      <dd>

       <p class="para">
        O número de processos filhos criados na inicialização.
        Usado apenas quando <em>pm</em> é configurado em <em>dynamic</em>.
        Valor padrão: min_spare_servers + (max_spare_servers -
        min_spare_servers) / 2.
       </p> 
      </dd>

     
     
      <dt id="pm.min-spare-servers">
       <em><code class="parameter">pm.min_spare_servers</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        O número mínimo desejado de processos servidores inativos. Usado apenas quando
        <em>pm</em> está configurado como <em>dynamic</em>. Também
        obrigatório neste caso.
       </p> 
      </dd>

     
     
      <dt id="pm.max-spare-servers">
       <em><code class="parameter">pm.max_spare_servers</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        O número máximo desejado de processos servidores inativos. Usado apenas quando
        <em>pm</em> está configurado como <em>dynamic</em>. Também
        obrigatório neste caso.
       </p> 
      </dd>

     
     
      <dt id="pm.max-requests">
       <em><code class="parameter">pm.max_requests</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        O número de solicitações de cada processo filho deve ser executado antes
       respawning. Isto pode ser útil para contornar falhas de memória de bibliotecas de
       terceiro partido. Para o processamento de pedido interminável especificar &#039;0 &#039;. equivalente a
       <var class="varname"><var class="varname">PHP_FCGI_MAX_REQUESTS</var></var>. Valor padrão: 0.
       </p> 
      </dd>

     
     
      <dt id="pm.status-path">
       <em><code class="parameter">pm.status_path</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        O URI para visualizar a página de status do FPM. Se este valor não for definido, não URI
        será reconhecida como uma página de estado. Valor padrão: nenhum.
       </p> 
      </dd>

     
     
      <dt id="ping.path">
       <em><code class="parameter">ping.path</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        O URI ping para chamar a página de FPM de monitoramento. Se este valor não é
        definido, nenhuma URI será reconhecido como uma página de ping. Isto poderia ser usado para testar
        de fora que FPM está vivo e responder. Por favor, note que o valor deve
        começar com uma barra à esquerda (/).
       </p> 
      </dd>

     
     
      <dt id="ping.response">
       <em><code class="parameter">ping.response</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Esta diretiva pode ser usado para personalizar a resposta a um pedido
        ping. A resposta é formatada como text/plain com uma resposta de código 200.
        Valor padrão: pong.
       </p> 
      </dd>

     
     
      <dt id="request-terminate-timeout">
       <em><code class="parameter">request_terminate_timeout</code></em>
       <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span>
      </dt>

      <dd>

       <p class="para">
       O tempo limite para servir um único pedido após o qual o processo
       trabalha serão encerradas. Esta opção deve ser usada quando o &#039;max_execution_time&#039;,
       opção do arquivo ini não parar a execução do script por algum motivo. Um valor de &#039;0&#039;, significa
       &#039;Off&#039;. Unidades disponíveis: s(econds) (padrão), m(inuts), h(our), ou d(ays).
       Valor padrão: 0.
       </p> 
      </dd>

     
     
      <dt id="request-slowlog-timeout">
       <em><code class="parameter">request_slowlog_timeout</code></em>
       <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span>
      </dt>

      <dd>

       <p class="para">
        O tempo limite para servir um único pedido depois que um rastreamento PHP
        serão despejados para o arquivo &#039;slowlog. Um valor de &#039;0 &#039;significa&#039; Off &#039;.
        Unidades disponíveis: s(econds)(padrão), m(inutes), h(ours), or d(ays).
        Valor padrão: 0.
       </p> 
      </dd>

     
     
      <dt id="slowlog">
       <em><code class="parameter">slowlog</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        O arquivo de log de solicitações lentas. Valor padrão:
        <em>#INSTALL_PREFIX#/log/php-fpm.log.slow</em>.
       </p> 
      </dd>

     
     
      <dt id="rlimit-files">
       <em><code class="parameter">rlimit_files</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        Definir abrir o descritor de arquivo rlimit. Valor padrão: valor definido pelo sistema.
       </p> 
      </dd>

     
     
      <dt id="rlimit-core">
       <em><code class="parameter">rlimit_core</code></em>
       <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      </dt>

      <dd>

       <p class="para">
        Defina o tamanho do núcleo maxímo do rlimit. Valores possíveis: &#039;unlimited&#039; ou um número inteiro maior ou igual a 0.
        Valor padrão: valor definido pelo sistema.
       </p> 
      </dd>

     
     
      <dt id="chroot">
       <em><code class="parameter">chroot</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Chroot para o início deste diretório. Este valor deve ser definido como
        um caminho absoluto. Quando este valor não está definido, chroot não é usado.
       </p> 
      </dd>

     
     
      <dt id="chdir">
       <em><code class="parameter">chdir</code></em>
       <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
      </dt>

      <dd>

       <p class="para">
        Chdir para o início deste diretório. Este valor deve ser um caminho
        absoluto. Valor padrão: diretório atual ou / ao chroot.
       </p> 
      </dd>

     
     
      <dt id="catch-workers-output">
       <em><code class="parameter">catch_workers_output</code></em>
       <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
      </dt>

      <dd>

       <p class="para">
        Redirecionar stdout e stderr no log de erro principal. Se não for definido,
        stdout e stderr serão redirecionadas para /dev/null de acordo com especificações FastCGI.
        Valor padrão: no.
       </p> 
      </dd>

     
    </dl>

    <p class="para">
     É possível passar variáveis de ambiente adicionais e atualizar as configurações do PHP de uma determinada rotina.
     Para fazer isso, você precisa adicionar as seguintes opções para <var class="filename">php-fpm.conf</var>
     <div class="example" id="example-48">
      <p><strong>Exemplo #1 Passando variáveis de ambiente e configurações do PHP para a rotina</strong></p>
      <div class="example-contents">
       <div class="inicode"><pre class="inicode">env[HOSTNAME] = $HOSTNAME
       env[PATH] = /usr/local/bin:/usr/bin:/bin
       env[TMP] = /tmp
       env[TMPDIR] = /tmp
       env[TEMP] = /tmp

       php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f www@my.domain.com
       php_flag[display_errors] = off
       php_admin_value[error_log] = /var/log/fpm-php.www.log
       php_admin_flag[log_errors] = on
       php_admin_value[memory_limit] = 32M</pre>
</div>
      </div>

     </div>
     Configurações do PHP feitas com <em>php_value</em> ou
     <em>php_flag</em> irá substituir o seu valor anterior.
     Por favor, note que a definição de
     <a href="ini.core.html#ini.disable-functions" class="link">disable_functions</a> ou 
     <a href="ini.core.html#ini.disable-classes" class="link">disable_classes</a> não
      irá substituir os previamente os valores definidos em <var class="filename">php.ini</var>,
      mas irá adicionar o novo valor em seu lugar.
    </p>
    <p class="para">
     Configurações definidas com <em>php_admin_value</em> e <em>php_admin_flag</em>
     não podem ser sobreescritas com <span class="function"><a href="function.ini-set.html" class="function">ini_set()</a></span>.
    </p>
    <p class="para">
     A partir de 5.3.3, configurações do PHP também são possíveis de ser definida no servidor
     <div class="example" id="example-49">
      <p><strong>Exemplo #2 definir as configurações de PHP no nginx.conf</strong></p>
      <div class="example-contents">
       <div class="inicode"><pre class="inicode">set $php_value &quot;pcre.backtrack_limit=424242&quot;;
set $php_value &quot;$php_value \n pcre.recursion_limit=99999&quot;;
fastcgi_param  PHP_VALUE $php_value;

fastcgi_param  PHP_ADMIN_VALUE &quot;open_basedir=/var/www/htdocs&quot;;</pre>
</div>
      </div>

     </div>
     <div class="caution"><strong class="caution">Cuidado</strong>
      <p class="para">
       Como essas configurações são passadas para php-fpm como cabeçalhos FastCGI,
        php-fpm não deve ser vinculado a um endereço acessível em todo o mundo.
        Caso contrário, qualquer um pode alterar as opções de configuração do PHP.
        veja também
       <a href="install.fpm.configuration.html#listen-allowed-clients" class="link">listen.allowed_clients</a>.
      </p>
     </div>
    </p>
   </div>
   
  </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.fpm.install.html">Installation</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.pecl.html">Instala&ccedil;&atilde;o das extens&otilde;es PECL</a></div>
 <div class="up"><a href="install.fpm.html">FastCGI Process Manager (FPM)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
