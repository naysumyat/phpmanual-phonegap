<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Sun, iPlanet e servidores Netscape no Solaris da Sun</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.unix.fhttpd.html">Notas relacionadas &agrave; fhttpd</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.unix.commandline.html">CGI e instala&ccedil;&otilde;es de linha de comando</a></div>
 <div class="up"><a href="install.unix.html">Instala&ccedil;&atilde;o em sistemas Unix</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="install.unix.sun" class="sect1">
    <h2 class="title">Sun, iPlanet e servidores Netscape no Solaris da Sun</h2>
    <p class="para">
     Essa seção contem notas e dicas específicas para instação do PHP nos servidores 
     un Java System Web Server, Sun ONE Web Server, iPlanet e Netscape no Solaris.
    </p>
    <p class="para">
     A partir do PHP 4.3.3, você pode usar scripts PHP com o
     <a href="ref.nsapi.html" class="link">módulo NSAPI</a> para 
     <a href="install.unix.sun.html#install.unix.sun.specialpages" class="link">gerar listagem de diretórios
     e páginas de erro personalizadas</a>. Funções adicionais para compatibilidade
     com o Apache também estão disponíveis. Para suporte nos webservers atuais, leia
     a <a href="install.unix.sun.html#install.unix.sun.notes" class="link">nota sobre sub-requisições</a>.
    </p>
    <p class="para">
     Você pode achar mais informações sobre como instalar o PHP para o
     Servidor Netscape Enterprise (NES) aqui:
     <a href="http://benoit.noss.free.fr/php/install-php4.html" class="link external">&raquo;&nbsp;http://benoit.noss.free.fr/php/install-php4.html</a>
    </p>
    
    <p class="para">
     Para compilar o PHP com servidores web Sun JSWS/Sun ONE WS/iPlanet/Netscape,
     entre o diretório apropriado de instalação para a opção
     <a href="configure.about.html#configure.with-nsapi" class="link">--with-nsapi=[DIR]</a>
     O diretório padrão é, normalmente
     <var class="filename">/opt/netscape/suitespot/</var>.
     Por favor, leia também <var class="filename">/php-xxx-version/sapi/nsapi/nsapi-readme.txt</var>.
    </p>
    <p class="para">
     <ol type="1">
      <li class="listitem">
       <p class="para">
        Instale os seguintes pacotes de <a href="http://www.sunfreeware.com/" class="link external">&raquo;&nbsp;
        http://www.sunfreeware.com/</a> ou outro site de download:
        <ul class="simplelist">
         <li class="member"><var class="filename">autoconf-2.13</var></li>
         <li class="member"><var class="filename">automake-1.4</var></li>
         <li class="member"><var class="filename">bison-1_25-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">flex-2_5_4a-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">gcc-2_95_2-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">gzip-1.2.4-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">m4-1_4-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">make-3_76_1-sol26-sparc-local</var></li>
         <li class="member">
          <var class="filename">mysql-3.23.24-beta</var> (se você quiser suporte ao MySQL)
         </li>
         <li class="member"><var class="filename">perl-5_005_03-sol26-sparc-local</var></li>
         <li class="member"><var class="filename">tar-1.13</var> (GNU tar)</li>
        </ul>
       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Assegure-se que seu PATH inclue os diretórios apropriados
        <em>PATH=.:/usr/local/bin:/usr/sbin:/usr/bin:/usr/ccs/bin</em>
        E está disponível para o seu sistema <strong class="userinput"><code>export PATH</code></strong>.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <strong class="userinput"><code>gunzip php-x.x.x.tar.gz</code></strong> (se você tiver uma distribuição .gz,
        caso contrário vá para o passo 4).
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <strong class="userinput"><code>tar xvf php-x.x.x.tar</code></strong>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Mude para o diretório recém-criado:
        <strong class="userinput"><code>cd ../php-x.x.x </code></strong>
       </span>
      </li>
      <li class="listitem">
       <p class="para">
        Para o passo seguinte, assegure-se de que 
        <var class="filename">/opt/netscape/suitespot/</var> é
        onde o seu servidor Netscape está instalado. Caso contrário, mude o 
        comando abaixo para o caminho correto e execute:
        <div class="example-contents">
<div class="shellcode"><pre class="shellcode">./configure --with-mysql=/usr/local/mysql \
--with-nsapi=/opt/netscape/suitespot/ \
--enable-libgcc</pre>
</div>
        </div>

       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Execute <strong class="command">make</strong> seguido de <strong class="command">make install</strong>.
       </span>
      </li>
     </ol>
    </p>
    <p class="para">
     Depois de fazer a instalação básica e ler o arquivo readme apropriado,
     você pode precisar executar alguns passos extras de configuração.
    </p>
    <p class="formalpara">
     <h5 class="title">Instruções de Configuração para o Sun/iPlanet/Netscape</h5>
     <p class="para">
      Primeiramente, você pode preciasr adicionar alguns caminhos para a váriavel de ambiente
      <var class="varname"><var class="varname">LD_LIBRARY_PATH</var></var> para que o servidor ache as bibliotecas compartilhadas. A melhor
      maneira de fazer isso é no script de inicialização do ser servidor web. Esse script normalmente está
      localizado em: <var class="filename">/caminho/para/servidor/https-nome_do_servidor/start</var>.
      Você pode precisar também de editar os arquivos de configuração que estão
      localizados em: <var class="filename">/caminho/para/servidor/https-nome_do_servidor/config/</var>.
      <ol type="1">
       <li class="listitem">
        <p class="para">
         Adicione a seguinte linha no arquivo <var class="filename">mime.types</var> (você pode fazer
         isso pelo servidor de administração):
         <div class="example-contents screen">
<div class="cdata"><pre>
type=magnus-internal/x-httpd-php exts=php
</pre></div>
         </div>
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Edite o arquivo <var class="filename">magnus.conf</var> (para servidores &gt;= 6) ou
         o arquivo <var class="filename">obj.conf</var> (para servidores &lt; 6) e adicione a seguinte
         biblioteca compartilhada que pode variar dependendo do seu sistema, ela se parecererá com
         <var class="filename">/opt/netscape/suitespot/bin/libphp4.so</var>. Você deve
         colocar as seguintes linhas após <em>mime types init</em>.
         <div class="example-contents">
<div class="cdata"><pre>
Init fn=&quot;load-modules&quot; funcs=&quot;php4_init,php4_execute,php4_auth_trans&quot; shlib=&quot;/opt/netscape/suitespot/bin/libphp4.so&quot;
Init fn=&quot;php4_init&quot; LateInit=&quot;yes&quot; errorString=&quot;Failed to initialize PHP!&quot; [php_ini=&quot;/path/to/php.ini&quot;]
</pre></div>
         </div>

         (PHP &gt;= 4.3.3) O parâmetro <em>php_ini</em> é
         opcional mas com ele você pode colocar seu arquivo <var class="filename">php.ini</var> no 
         diretório config do seu servidor web.
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Configure o objeto padrão no arquivo <var class="filename">obj.conf</var>
         (para classes de servidor virtuais [versão 6.0+] no
         arquivo <var class="filename">vserver.obj.conf</var>):
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;default&quot;&gt;
.
.
.
.#NOTA Essa linha deve acontecer após todos as linhas &#039;ObjectType&#039; e antes de todas as linas &#039;AddLog&#039;
Service fn=&quot;php4_execute&quot; type=&quot;magnus-internal/x-httpd-php&quot; [inikey=value inikey=value ...]
.
.
&lt;/Object&gt;
</pre></div>
         </div>

         (PHP &gt;= 4.3.3) Como parâmetros adicionais, você pode acrescentar valores
         especiais do <var class="filename">php.ini</var>, por exemplo, você pode editar um 
         <em>docroot=&quot;/path/to/docroot&quot;</em> específico 
         para o contexto <em>php4_execute</em> chamado. Para valores
         booleanos, use 0/1 como valor, não 
         <em>&quot;On&quot;,&quot;Off&quot;,...</em>
         (isso não funcionará corretamente) ,ex.:
         <em>zlib.output_compression=1</em> ao invés de
         <em>zlib.output_compression=&quot;On&quot;</em>
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Isso só é necessários se você quiser configurar um diretório que apenas consiste de
         scripts PHP (assim como um diretório <var class="filename">cgi-bin</var>):
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;x-httpd-php&quot;&gt;
ObjectType fn=&quot;force-type&quot; type=&quot;magnus-internal/x-httpd-php&quot;
Service fn=php4_execute [inikey=value inikey=value ...]
&lt;/Object&gt;
</pre></div>
         </div>

         Depois que você pode configurar um diretório no servidor de Administração e atribuir a ele
         o estilo <em>x-httpd-php</em>. Todos os arquivo no diretório serão executados como PHP.
         Isso é bom para esconder uso do PHP renomeando os arquivos para <var class="filename">.html</var>.
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Configuração de autenticação: autenticação do PHP não pode ser usada com qualquer
         outra autenticação. TODA AUTENTICAÇÃO E PASSADA PARA O SEU SCRIPT PHP.
         Para configurar autenticação via PHP para o servidor todo, adicione a
         seguinte linha para o seu objeto padrão:
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object name=&quot;default&quot;&gt;
AuthTrans fn=php4_auth_trans
.
.
.
&lt;/Object&gt;
</pre></div>
         </div>

        </p>
       </li>
       <li class="listitem">
        <p class="para">
         Para usar autenticação via PHP em apenas um diretório, adicione o seguinte:
         <div class="example-contents">
<div class="cdata"><pre>
&lt;Object ppath=&quot;d:\path\to\authenticated\dir\*&quot;&gt;
AuthTrans fn=php4_auth_trans
&lt;/Object&gt;
</pre></div>
         </div>

        </p>
       </li>
      </ol>
     </p>
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      O tamanho da pilha que o PHP usa depende da configuração do servidor web. Se você tiver
      problemas com scripts PHP muito grandes, é recomendado aumentar o tamanho da pilha com o Admin Server
      (na seção &quot;MAGNUS EDITOR&quot;).
     </p>
    </p></blockquote>
   
   <div class="sect2" id="install.unix.sun.phpini">
    <h3 class="title">Ambiente CGI e modificações recomendadas ao arquivo php.ini</h3>
    <p class="para">
     É importante ter em mente quando escrever scripts PHP que os servidores web 
     Sun JSWS/Sun ONE WS/iPlanet/Netscape são multithreaded. Por isso, todas as requisições
     estão rodando no mesmo espaço de processo (o espaço do servidor web
     em si) e esse espaço só tem um ambiente. Se você quiser usar variáveis
     CGI como <em>PATH_INFO</em>, <em>HTTP_HOST</em>
     etc, não é correto tentar fazer da maneira como PHP antigo faz, com
     a função <span class="function"><a href="function.getenv.html" class="function">getenv()</a></span> ou de maneira similar (registrando globais
     ao ambiente, <em>$_ENV</em>). Você só pegaria o ambiente
     do servidor web sem qualquer variáveis CGI válidas.
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Por que existem variáveis CGI inválidas no ambiente?
     </p>
     <p class="para">
      Resposta: Isso é porque você iniciou o processo do servidor do admin server
      que roda o script de iniciação do mesmo, você queria iniciar como um script CGI
      (um script CGI dentro do admin server!). Isso é porque o ambiente do
      servidor web iniciado tem algumas variáveis CGI de ambiente nele. Você pode testar
      isso iniciando o servidor web sem ser do admin server. Use 
      a linha de comando como usuário root e inicie-o manualmente - você verá que
      não exite nenhuma variável CGI de ambiente.
     </p>
    </p></blockquote>
    <p class="para">
     Simplesmente mudando seus scripts para pegar variáveis CGI é a maneira correta para
     o PHP 4.x usando o superglobal <em>$_SERVER</em>. Se você tiver
     scripts velhos que usam <em>$HTTP_HOST</em>, etc., você deve ligar
     <em>register_globals</em> no arquivo <var class="filename">php.ini</var> e mudar a ordem das 
     variáveis também (importante: remova <em>&quot;E&quot;</em> de lá,
     porque voe não precisa do ambiente aqui):
     <div class="example-contents">
<div class="cdata"><pre>
variables_order = &quot;GPCS&quot;
register_globals = On
</pre></div>
     </div>

    </p>
   </div>
   
   <div class="sect2" id="install.unix.sun.specialpages">
    <h3 class="title">Uso especial para páginas de erro e listagem de diretório auto-geradas (PHP &gt;= 4.3.3)</h3>
    <p class="para">
     Você pode usar o PHP para gerar as páginas de erro para <em>&quot;404 Not Found&quot;</em>
     ou similares. Adicione a seguinte linha no objeto do arquivo <var class="filename">obj.conf</var> para
     cada página de erro que você quiser sobrescrever:
     <div class="example-contents">
<div class="cdata"><pre>
Error fn=&quot;php4_execute&quot; code=XXX script=&quot;/path/to/script.php&quot; [inikey=value inikey=value...]
</pre></div>
     </div>

     Onde <em>XXX</em> é o código do erro HTTP. Por favor remova
     qualquer outra diretiva <em>Error</em> que possa interferir com as suas.
     Se você quiser colocar uma página para todos os erros que podem existir, tire
     o parâmetro <em>code</em>. Seu script pode pegar o código do erro 
     com <em>$_SERVER[&#039;ERROR_TYPE&#039;]</em>.
    </p>
    <p class="para">
     Outra possibilidade é criar uma listagem do diretório auto-gerada.
     Apenas crie um script PHP que mostra uma listagem do diretório e
     substitua o padrão correspondente Service line for
     <em>type=&quot;magnus-internal/directory&quot;</em>
     no arquivo <var class="filename">obj.conf</var> pelo seguinte:
     <div class="example-contents">
<div class="cdata"><pre>
Service fn=&quot;php4_execute&quot; type=&quot;magnus-internal/directory&quot; script=&quot;/path/to/script.php&quot; [inikey=value inikey=value...]
</pre></div>
     </div>

     Tanto para os erros e as páginas de listagem do diretório a URI original e
     a URL traduzida estão nas variáveis <em>$_SERVER[&#039;PATH_INFO&#039;]</em> e
     <em>$_SERVER[&#039;PATH_TRANSLATED&#039;]</em>.
    </p>
   </div>
   
   <div class="sect2" id="install.unix.sun.notes">
    <h3 class="title">Nota sobre <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> e sub-requisições(PHP &gt;= 4.3.3)</h3>
    <p class="para">
     O módulo NSAPI agora suporta a função <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span>
     (sinônima (alias): <span class="function"><a href="function.virtual.html" class="function">virtual()</a></span>)
     para fazer sub-requisições no servidor web e inserir o resultado na página web.
     Essa função usa algumas funcionalidades não documentadas da biblioteca NSAPI.
     No Unix, o módulo procura automaticamente para as funções necessárias e as usa
     se estiverem disponíveis. Se não, <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> é desabilitada.
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Mas esteja avisado: Suporte para <span class="function"><a href="function.nsapi-virtual.html" class="function">nsapi_virtual()</a></span> é EXPERIMENTAL!!!
     </p>
    </p></blockquote>
   </div>   
  </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="install.unix.fhttpd.html">Notas relacionadas &agrave; fhttpd</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="install.unix.commandline.html">CGI e instala&ccedil;&otilde;es de linha de comando</a></div>
 <div class="up"><a href="install.unix.html">Instala&ccedil;&atilde;o em sistemas Unix</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
