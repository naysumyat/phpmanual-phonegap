<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>L&ecirc; os cabe&ccedil;alhos EXIF de imagens JPEG
    ou TIFF. Deste modo voc&ecirc; poder&aacute; ler meta dados gerados
    por cam&ecirc;ras digitais.</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.exif-imagetype.html">exif_imagetype</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.exif-tagname.html">exif_tagname</a></div>
 <div class="up"><a href="ref.exif.html">Fun&ccedil;&otilde;es da Exif</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.exif-read-data" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">exif_read_data</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5)</p><p class="refpurpose"><span class="refname">exif_read_data</span> &mdash; <span class="dc-title">Lê os cabeçalhos <acronym title="Exchangeable Image File ">EXIF</acronym> de imagens <acronym title="Joint Photographic Experts Group">JPEG</acronym>
    ou <acronym title="Tagged Image File Format">TIFF</acronym>. Deste modo você poderá ler meta dados gerados
    por camêras digitais.</span></p>

   </div>
   <div class="refsect1 unknown-seealsp" id="refsect1-function.exif-read-data-unknown-seealsp">
    <h3 class="title">Descrição</h3>
    <div class="methodsynopsis dc-description">
     <span class="type">array</span> <span class="methodname"><strong>exif_read_data</strong></span>
      ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
     [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$sections</code></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$arrays</code></span>
     [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$thumbnail</code></span>
    ]]] )</div>

    <p class="para rdfs-comment">
     A função <span class="function"><strong>exif_read_data()</strong></span> lê os cabeçalhos
     EXIF de um arquivo de imagem JPEG ou TIFF. Retorna uma matriz associativa
     aonde os índices são os nomes dos cabeçalhos e os valores são os
     valores associados a estes cabeçalhos. Se nenhum dado puder ser retornado,
     então o resultado é <strong><code>FALSE</code></strong>.
    </p>
    <p class="para">
     <em><code class="parameter">filename</code></em> é o nome do arquivo a ser lido.
     Este não pode ser um URL.
    </p>
    <p class="para">
     <em><code class="parameter">sections</code></em> é uma lista das seções separadas por vírgula
     que devem estar presentes em um arquivo para produzir a matriz com os resultados.
     Se nenhuma das seções não puder ser encontradas, o valor de retorno será <strong><code>FALSE</code></strong>.
     <table class="doctable informaltable">
     
      <tbody class="tbody">
       <tr>
        <td>FILE</td>
        <td>FileName, FileSize, FileDateTime, SectionsFound</td>
       </tr>

       <tr>
        <td>COMPUTED</td>
        <td>html, Width, Height, IsColor e algo mais se disponível.
        </td>
       </tr>

       <tr>
        <td>ANY_TAG</td>
        <td>Qualquer informação que tenha uma Tag ex. IFD0, EXIF, ...</td>
       </tr>

       <tr>
        <td>IFD0</td>
        <td>Todas as informações marcadas de IFD0. Em arquivos de imagens normais
        isto contém o tamanho e assim por diante.</td>
       </tr>

       <tr>
        <td>THUMBNAIL</td>
        <td>Supostamente um arquivo contém uma miniatura de tver um segundo IFD.
        Toda a informação marcada sobre esta miniatura embutida é guardada
        nesta seção.</td>
       </tr>

       <tr>
        <td>COMMENT</td>
        <td>Cabeçalhos de comentários de imagens JPEG.</td>
       </tr>

       <tr>
        <td>EXIF</td>
        <td>A seção EXIF é uma subseção de IFD0. Ela contém
        informação mais detalhada sobre uma imagem. A maioria destas é relacionada
        a camêras digitais.</td>
       </tr>

      </tbody>
     
     </table>

    </p>
    <p class="para">
     <em><code class="parameter">arrays</code></em> especifica quando cada seção se torna ou não uma
     matriz. As seções <em class="emphasis">COMPUTED</em>,
     <em class="emphasis">THUMBNAIL</em> e <em class="emphasis">COMMENT</em> sempre
     se tornam matrizes já que podem conter valores os quais os nomes conflitem
     com outras seções.
    </p>
    <p class="para">
     <em><code class="parameter">thumbnail</code></em> quando ler ou não a miniatura em sí
     ou apenas os dados marcados.
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Cabeçalhos Exif tendem a estar presentes em imagens JPEG/TIFF geradas por camêras
      digitais, mas infelizmente, cada fabricante de camêra digital tem
      uma idéia diferente de como marcar as suas imagens, então você
      não pode confiar em um cabeçalho EXIF especifico estar presente.
     </p>
     <p class="para">
      Windows ME/XP podem limpar os cabeçalhos Exif quando estiverem conectados a 
      uma camêra. Maiores informações estão disponíveis em <a href="http://www.canon.co.jp/Imaging/NOTICE/011214-e.html" class="link external">&raquo;&nbsp;http://www.canon.co.jp/Imaging/NOTICE/011214-e.html</a>.
     </p>
    </p></blockquote>
    <p class="para">
     <div class="example" id="example-2860">
      <p><strong>Exemplo #1 Exemplo <span class="function"><strong>exif_read_data()</strong></span></strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"test1.jpg:&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'tests/test1.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'IFD0'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$exif</span><span style="color: #007700">===</span><span style="color: #0000BB">false&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">"No&nbsp;header&nbsp;data&nbsp;found.&lt;br&nbsp;/&gt;\n"&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"Image&nbsp;contains&nbsp;headers&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">exif_read_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'tests/test2.jpg'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"test2.jpg:&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />foreach&nbsp;(</span><span style="color: #0000BB">$exif&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$section</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$section&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">.</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>
      A primeira chamada falha porque a imagem não tem informações no cabeçalho.
       <div class="example-contents screen">
<div class="cdata"><pre>
test1.jpg:
No header data found.
test2.jpg:
FILE.FileName: test2.jpg
FILE.FileDateTime: 1017666176
FILE.FileSize: 1240
FILE.FileType: 2
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
COMPUTED.html: width=&quot;1&quot; height=&quot;1&quot;
COMPUTED.Height: 1
COMPUTED.Width: 1
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.UserComment: Exif test image.
COMPUTED.UserCommentEncoding: ASCII
COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
COMPUTED.Copyright.Editor: Edited by M.Boerger.
IFD0.Copyright: Photo (c) M.Boerger
IFD0.UserComment: ASCII
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.JPEGInterchangeFormatLength: 523
COMMENT.0: Comment #1.
COMMENT.1: Comment #2.
COMMENT.2: Comment #3end
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.Thumbnail.Height: 1
THUMBNAIL.Thumbnail.Height: 1
</pre></div>
       </div>
      </p></div>
     </div>
    </p>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Se a imagem conter qualquer dado IFDO então COMPUTED contém a entrada
      ByteOrderMotorola a qual é 0 para little-endian (intel) e 1 para
      big-endian (motorola), relativo a ordem dos byte. Isto foi adicionado no PHP 4.3.
     </p>
     <p class="para">
      Quando um cabeçalho Exif contém uma nota de Copyright pode conter dois
      valores. Como a solução é inconsistente no padrão Exif 2.10 a seção COMPUTED
      irá retornar ambas as entradas <em class="emphasis">Copyright.Photographer</em>
      e <em class="emphasis">Copyright.Editor</em> enquando as seções IFD0 contém
      uma matriz de byte onde o caractere NULL separa as duas entradas. Ou apenas a 
      primeira entrada se o tipo de dados estiver errado (funcionamento normal do Exif).
      O COMPUTED irá conter também uma entrada <em class="emphasis">Copyright</em> a qual
      será a string original do copyright ou uma lista separada por vírgula
      da foto e do copyright do editor.
     </p>
    </p></blockquote>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      A tag UserComment tem o mesmo problema que a tag de Copyright. Ela pode guardar dois
      valores, primeiro a codificação usada e em segundo o valor em sí. Então a seção
      IFD contém somente a codificação ou uma matriz de byte. A seção COMPUTED
      irá guardar ambos nas entradas <em class="emphasis">UserCommentEncoding</em> e
      <em class="emphasis">UserComment</em>. A entrada <em class="emphasis">UserComment</em>
      esta disponível em ambos os casos então deve ser usada em preferencia ao
      valor da seção IFD0.
     </p>
     <p class="para">
      Se o comentário do usuário usar Unicode ou codificação JIS e o módulo mbstring
      estiver disponível esta codificação será automaticamente modificada de acordo com a definição
      do exif que estiver no <var class="filename">php.ini</var>. Isto foi adicionado no PHP 4.3.
     </p>
    </p></blockquote>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Height e Width(altura e largura) são compudados da mesma maneira que <span class="function"><a href="function.getimagesize.html" class="function">getimagesize()</a></span>
      faz, então seus valores não devem ser parte de nenhum cabeçalhor retornado. Também html é
      uma height/width de textopara ser usado dentro de um <acronym title="Hyper Text Markup Language">HTML</acronym> normal.
     </p>
    </p></blockquote>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      A partir do PHP 4.3 a função pode ler dodos os dados <acronym title="Image File Directory">IFD</acronym>
      embutidos, incluindo matrizes (retornadas assim). Também o tamanho da miniatura embutida
      retornada na submatriz <em class="emphasis">THUMBNAIL</em> e a função
      <span class="function"><strong>exif_read_data()</strong></span> pode retornar miniaturas no formato <acronym title="Tagged Image File Format">TIFF</acronym>.
      Último, mas não menos importante, não existe limite de tamanho para os valores retornados
      (não enquanto o limite de memória não é atingido).
     </p>
    </p></blockquote>
    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <span class="simpara">
      Esta função esta disponível apenas no PHP 4 compilado usando
      <strong class="option configure">--enable-exif</strong>
.
      Sua funcionalidade e comportamento mudou no PHP 4.2. Versões anteriores
      são muito instaveis.
     </span>
     <span class="simpara">
      A partir do PHP 4.3 comentários do usuário podem mudar a codificação automaticamente
      se o PHP 4 foi compilado usando <strong class="option configure">--enable-mbstring</strong>
.
     </span>
     <span class="simpara">
      Esta função não requer a biblioteca de imagem GD.
     </span>
     <span class="simpara">
      Veja também <span class="function"><a href="function.exif-thumbnail.html" class="function">exif_thumbnail()</a></span> e <span class="function"><a href="function.getimagesize.html" class="function">getimagesize()</a></span>.
     </span>
    </p></blockquote>
   </div>

  </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.exif-imagetype.html">exif_imagetype</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.exif-tagname.html">exif_tagname</a></div>
 <div class="up"><a href="ref.exif.html">Fun&ccedil;&otilde;es da Exif</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
